{% extends "base.html" %}

{% block content %}
<p>Title: {{recipe.title}}</p>
<p>Preparation: {{recipe.preparation}}</p>
<p>Created: {{recipe.created_at}}</p>
<p>Updated: {{recipe.updated_at}}</p>

<p>List of ingredients:</p>
{% for ingredient in ingredients_list %}

    {% if ingredient.amount == None and ingredient.unit == None %}
        <li>
            <a href="{% url 'recipes:update_ingredient' ingredient.pk %}">{{ ingredient.name }}</a>
            <form method="post" action="{% url 'recipes:delete_ingredient' ingredient.pk %}">{% csrf_token %}<input type="submit" value="delete"></form> 
        </li>

    {% elif ingredient.unit == None %}
        <li>
            <a href="{% url 'recipes:update_ingredient' ingredient.pk %}">{{ ingredient.amount }} {{ ingredient.name }}</a>
            <form method="post" action="{% url 'recipes:delete_ingredient' ingredient.pk %}">{% csrf_token %}<input type="submit" value="delete"></form> 
        </li>

    {% elif ingredient.amount == None %}
        <li>
            <a href="{% url 'recipes:update_ingredient' ingredient.pk %}">{{ ingredient.unit }} {{ ingredient.name }}</a>
            <form method="post" action="{% url 'recipes:delete_ingredient' ingredient.pk %}">{% csrf_token %}<input type="submit" value="delete"></form> 
        </li>

    {% else %}
        <li>
            <a href="{% url 'recipes:update_ingredient' ingredient.pk %}">{{ ingredient.amount }} {{ ingredient.unit }} {{ ingredient.name }}</a>
            <form method="post" action="{% url 'recipes:delete_ingredient' ingredient.pk %}">{% csrf_token %}<input type="submit" value="delete"></form> 
        </li>

    {% endif %}

    {% empty %}

        <p>No available ingredients</p>

{% endfor %}

<a href="{% url 'recipes:update_recipe' recipe.pk %}", class="btn btn-secondary", role="button">Update</a>
<a href="{% url 'recipes:delete_recipe' recipe.pk %}", class="btn btn-warning", role="button">Delete</a>
<a href="{% url 'recipes:add_ingredient' recipe.pk %}", class="btn btn-success", role="button">Add Ingredient</a>
<a href="{% url 'recipes:recipes' %}", class="btn btn-primary", role="button">Back</a>

{% endblock %}
